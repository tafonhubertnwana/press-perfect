(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5060],{36411:function(e,t,n){"use strict";var a,i=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}t.Z=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=i.createElement("path",{d:"M19 21.5H5a1 1 0 0 1-1-1v-17a1 1 0 0 1 1-1h8a.995.995 0 0 1 .675.262l.032.031 6 6 .031.032.001.001A1 1 0 0 1 20 9.5v11a1 1 0 0 1-1 1Zm-13-2h12v-9h-5a1 1 0 0 1-1-1v-5H6v15Zm8-11h2.586L14 5.914V8.5Z"})))}},89072:function(e,t,n){"use strict";n.r(t);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FileInfo_GenericFileInfo_attachment",selections:[{args:null,kind:"FragmentSpread",name:"FileInfo_useName_attachment"},{args:null,kind:"FragmentSpread",name:"FileInfo_useMimeType_attachment"},{args:null,kind:"FragmentSpread",name:"FileInfo_useUrl_attachment"},{args:null,kind:"FragmentSpread",name:"FileInfo_useSize_attachment"},{args:null,kind:"FragmentSpread",name:"FileInfo_useIsLoading_messageAttachment"}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="86cf4a30ad884b1eaada9fdb947967f4",t.default=a},31079:function(e,t,n){"use strict";n.r(t);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FileInfo_ImageInfo_attachment",selections:[{args:null,kind:"FragmentSpread",name:"FileInfo_useName_attachment"},{args:null,kind:"FragmentSpread",name:"FileInfo_useUrl_attachment"}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="a7f3149e2fc944bfda6e01fd9eb54cd5",t.default=a},16747:function(e,t,n){"use strict";n.r(t);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FileInfo_attachment",selections:[{args:null,kind:"FragmentSpread",name:"FileInfo_useMimeType_attachment"},{args:null,kind:"FragmentSpread",name:"FileInfo_GenericFileInfo_attachment"},{args:null,kind:"FragmentSpread",name:"FileInfo_ImageInfo_attachment"}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="b929cc33574e7123fb2b38376f100621",t.default=a},88207:function(e,t,n){"use strict";n.r(t);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FileInfo_useIsLoading_messageAttachment",selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"isOptimistic",storageKey:null}]}],type:"MessageAttachment",abstractKey:null};a.hash="6098b79cd856b6e809188cbe96e59d11",t.default=a},44129:function(e,t,n){"use strict";n.r(t);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FileInfo_useMimeType_attachment",selections:[{alias:null,args:null,concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mimeType",storageKey:null}],storageKey:null}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="72c9f77a03b034ddde99b734afc3570f",t.default=a},27820:function(e,t,n){"use strict";n.r(t);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FileInfo_useName_attachment",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="3d7c6e009705079c358a3fe4ae27e326",t.default=a},24366:function(e,t,n){"use strict";n.r(t);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FileInfo_useSize_attachment",selections:[{alias:null,args:null,concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}],storageKey:null}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="bb68e0a5ab9e1b762d5adf7c3ba2c952",t.default=a},37869:function(e,t,n){"use strict";n.r(t);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FileInfo_useUrl_attachment",selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="d96d0e0cb3c06b0a75db717b2ee05226",t.default=a},79293:function(e,t,n){"use strict";n.r(t);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FileInfo_viewer",selections:[{alias:"enableImageAttachmentsForBots",args:[{kind:"Literal",name:"gateName",value:"poe_enable_image_attachments_for_bots"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_image_attachments_for_bots")'}],type:"Viewer",abstractKey:null};a.hash="1cddcd179b0f724535aa9d8c18c36994",t.default=a},97605:function(e,t,n){"use strict";n.r(t);let a={kind:"InlineDataFragment",name:"messageHelpers_isBotMessage"};a.hash="5114c2feae663b5804ecb0c7eb469514",t.default=a},45817:function(e,t,n){"use strict";n.r(t);let a={kind:"InlineDataFragment",name:"messageHelpers_isChatBreak"};a.hash="cfc438dc2a212f2623c6474a67a8acaa",t.default=a},95873:function(e,t,n){"use strict";n.r(t);let a={kind:"InlineDataFragment",name:"messageHelpers_isCommandMessage"};a.hash="e0290123e50b88878ee750bf6d439b49",t.default=a},45963:function(e,t,n){"use strict";n.r(t);let a={kind:"InlineDataFragment",name:"messageHelpers_isHumanMessage"};a.hash="51b5bb6253d4683e435e030736de3af1",t.default=a},23593:function(e,t,n){"use strict";n.r(t);let a={kind:"InlineDataFragment",name:"setBotDetailsSidebar_bot"};a.hash="d4ae840ff801ee1cc626fd4be3b03b18",t.default=a},63236:function(e,t,n){"use strict";var a=n(67294);let i=a.createContext(null);t.Z=i},70138:function(e,t,n){"use strict";var a=n(67294);let i=a.createContext(null);t.Z=i},39128:function(e,t,n){"use strict";n.d(t,{S:function(){return GenericFileInfo},Z:function(){return patterns_FileInfo}});var a,i=n(85893),s=n(67294),r=n(22120),l=n(22578),u=n(63236),o=n(70138),c=n(3102),m=n(36411);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var film=function(e){return s.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=s.createElement("path",{d:"M19.5 3.5h-15C2.57 3.5 1 5.07 1 7v10c0 1.93 1.57 3.5 3.5 3.5h15c1.93 0 3.5-1.57 3.5-3.5V7c0-1.93-1.57-3.5-3.5-3.5ZM21 7v1.5h-2v-3h.5c.827 0 1.5.673 1.5 1.5Zm-4 4H7V5.5h10V11ZM5 13.5H3v-3h2v3Zm2-.5h10v5.5H7V13Zm12-2.5h2v3h-2v-3Zm-14.5-5H5v3H3V7c0-.827.673-1.5 1.5-1.5ZM3 17v-1.5h2v3h-.5c-.827 0-1.5-.673-1.5-1.5Zm16.5 1.5H19v-3h2V17c0 .827-.673 1.5-1.5 1.5Z"})))},d=n(52958),f=n(34616),_=n(42870),g=n(30498),p=n(73870),h=n.n(p),b=n(47341);let useMimeType=e=>{let t=(0,g.J$)(n(44129),e);return(0,g.zE)(t)?t.type:t.file.mimeType},useName=e=>{let t=(0,g.J$)(n(27820),e);return t.name},useSize=e=>{let t=(0,g.J$)(n(24366),e);return(0,g.zE)(t)?t.size:t.file.size},useUrl=e=>{let t=(0,g.J$)(n(37869),e),a=(0,s.useMemo)(()=>(0,g.zE)(t)?URL.createObjectURL(t):t.url,[t]);return a},useIsLoading=e=>{let t=(0,g.J$)(n(88207),e);return"isOptimistic"in t&&t.isOptimistic},parseMimeType=e=>{let t=e.split(";")[0],[n,a]=t.split("/");return n&&a?[n,a]:null},useDisplayFileType=e=>{let{t}=(0,r.$G)(),n=parseMimeType(e);if(n){let[e,a]=n;if("text"===e){if("plain"===a)return t("text");if(["csv","html"].includes(a))return a}if("application"===e){if("pdf"===a)return"pdf";if("vnd.openxmlformats-officedocument.wordprocessingml.document"===a)return"docx"}if("image"===e)return["jpeg","png"].includes(a)?a:t("image");if("video"===e)return t("video")}return t("file")},useDisplaySize=e=>{let{t}=(0,r.$G)(),[n,a]=(0,d.w)(e);return t("{{displaySize, number}}",{displaySize:n,unit:a,style:"unit",unitDisplay:"short"})},F={},canRenderAsImage=e=>{if(!e.startsWith("image/"))return!1;if(e.startsWith("image/jpeg")||e.startsWith("image/png")||e.startsWith("image/bmp"))return!0;if(void 0===F[e])try{let t=document.createElement("canvas");t.getContext&&t.getContext("2d")?F[e]=0==t.toDataURL(e).indexOf("data:".concat(e)):F[e]=!1}catch(t){F[e]=!1}return F[e]},GenericFileInfo=e=>{let{file:t,className:a}=e,s=(0,g.J$)(n(89072),t),r=useName(s),l=useMimeType(s),u=l.startsWith("video/"),o=useUrl(s),c=useSize(s),d=useIsLoading(s),_=o?"a":"div",p=useDisplaySize(c),b=useDisplayFileType(l);return(0,i.jsxs)(_,{className:(0,f.$)(h().fileInfo,d&&h().loading,a),...o?{href:o,target:"_blank"}:{},children:[u?(0,i.jsx)(film,{className:h().icon}):(0,i.jsx)(m.Z,{className:h().icon}),(0,i.jsxs)("div",{className:h().textPane,children:[(0,i.jsx)("div",{className:h().title,children:r}),(0,i.jsxs)("div",{className:h().metadata,children:[(0,i.jsx)("span",{className:h().fileType,children:b})," \xb7 ",p]})]})]})},ImageInfo=e=>{let{file:t,className:a}=e,r=(0,g.J$)(n(31079),t),l=useName(r),m=useUrl(r),d=(0,s.useContext)(u.Z),p=(0,s.useContext)(o.Z),{openImageViewer:F}=(0,c.z)(),y=(0,s.useCallback)(()=>{m&&(0,_.km)(m,_.Jg.image,null==d?void 0:d.botId,null==p?void 0:p.messageId)},[d,p,m]),v=(0,s.useCallback)(()=>{m&&F({src:m,alt:l},()=>y)},[m,l,F,y]);return m?(0,i.jsx)("img",{suppressHydrationWarning:!0,className:(0,f.$)(h().image,a),src:m,alt:l,onClick:v}):(0,i.jsx)("div",{className:h().imageLoader,children:(0,i.jsx)(b.Z,{})})};var patterns_FileInfo=e=>{let{file:t,viewer:a,className:s}=e,r=(0,g.J$)(n(16747),t),{enableImageAttachmentsForBots:u}=(0,l.useFragment)(n(79293),a),o=useMimeType(r),c=u&&canRenderAsImage(o)?ImageInfo:GenericFileInfo;return(0,i.jsx)(c,{file:r,className:s})}},89942:function(e,t,n){"use strict";var a=n(85893),i=n(67294),s=n(34616),r=n(81791),l=n.n(r);t.Z=e=>{let{children:t,className:n}=e,r=(0,i.useRef)(null),u=(0,i.useCallback)(e=>{r.current&&(e.preventDefault(),e.stopPropagation(),r.current.scrollLeft+=e.deltaY,r.current.scrollLeft+=e.deltaX)},[]);return(0,i.useEffect)(()=>{let e=r.current;return e&&e.addEventListener("wheel",u),()=>{e&&e.removeEventListener("wheel",u)}},[u]),(0,a.jsx)("div",{ref:r,className:(0,s.$)(l().container,n),children:t})}},47341:function(e,t,n){"use strict";n.d(t,{Z:function(){return patterns_LoadingSpinner}});var a,i=n(85893),s=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var loadingSpinner=function(e){return s.createElement("svg",_extends({viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 2.6a7.4 7.4 0 1 0 7.4 7.4 1 1 0 1 1 2 0A9.4 9.4 0 1 1 .6 10 9.4 9.4 0 0 1 10 .6a1 1 0 1 1 0 2Z"})))},r=n(27813),l=n.n(r),patterns_LoadingSpinner=()=>(0,i.jsx)(loadingSpinner,{className:l().loadingSpinner})},52958:function(e,t,n){"use strict";n.d(t,{w:function(){return convertBytesUnit}});let a=["byte","kilobyte","megabyte","gigabyte","terabyte","petabyte"],convertBytesUnit=e=>{if(0===e)return[0,"byte"];let t=Math.min(Math.floor(Math.log(e)/Math.log(1e3)),a.length-1);return[Math.round(e/Math.pow(1e3,t)),a[t]]}},52667:function(e,t,n){"use strict";n.d(t,{OE:function(){return isBotMessage},Q1:function(){return isHumanMessage},SX:function(){return authorIsHuman},TV:function(){return authorIsCommand},hb:function(){return isChatBreak},pF:function(){return isCommandMessage},y8:function(){return authorIsBot}});var a=n(22578),i=n(85649);let isBotMessage=e=>{if(!e)return!1;let t=(0,a.readInlineData)(n(97605),e);return!isHumanMessage(t)&&!isChatBreak(t)&&!isCommandMessage(t)},isHumanMessage=e=>{if(!e)return!1;let t=(0,a.readInlineData)(n(45963),e);return authorIsHuman(t.author)},isChatBreak=e=>{if(!e)return!1;let t=(0,a.readInlineData)(n(45817),e);return authorIsChatBreak(t.author)},isCommandMessage=e=>{if(!e)return!1;let t=(0,a.readInlineData)(n(95873),e);return authorIsCommand(t.author)},authorIsHuman=e=>e===i.Z.human,authorIsChatBreak=e=>e===i.Z.chat_break,authorIsCommand=e=>e===i.Z.command,authorIsBot=e=>!authorIsHuman(e)&&!authorIsChatBreak(e)&&!authorIsCommand(e)},30498:function(e,t,n){"use strict";n.d(t,{J$:function(){return useFileFragment},mj:function(){return useFilesFragment},zE:function(){return isFile}});var a=n(41143),i=n.n(a),s=n(22578);let isFile=e=>e instanceof File,useFileFragment=(e,t)=>{let n=(0,s.useFragment)(e,isFile(t)?null:t);return isFile(t)?t:n||i()(!1,"Attachment file is undefined")},zipperMerge=(e,t)=>{let n=[],a=0,i=0;for(;a<e.length||i<t.length;)a>=e.length?n.push(t[i++][1]):i>=t.length?n.push(e[a++][1]):e[a][0]<t[i][0]?n.push(e[a++][1]):n.push(t[i++][1]);return n},useFilesFragment=(e,t)=>{let n=t.map((e,t)=>[t,e]),a=n.filter(e=>isFile(e[1])),i=n.filter(e=>!isFile(e[1])),r=(0,s.useFragment)(e,i.map(e=>{let[,t]=e;return t}))||[],l=r.map((e,t)=>[i[t][0],e]);return zipperMerge(a,l)}},59519:function(e,t,n){"use strict";n.d(t,{X:function(){return useSetBotDetailsSidebar}});var a=n(85893),i=n(67294),s=n(22578),r=n(4146);let l=(0,i.lazy)(()=>Promise.all([n.e(7283),n.e(9370)]).then(n.bind(n,82974))),useSetBotDetailsSidebar=()=>{let e=(0,i.useContext)(r.Z);return(0,i.useCallback)((t,i)=>{let r=(0,s.readInlineData)(n(23593),t);e((0,a.jsx)(l,{bot:r}),i)},[e])}},47875:function(e,t){"use strict";var n,a;(a=n||(n={})).success="success",a.no_access="no_access",a.too_many_tokens="too_many_tokens",a.reached_limit="reached_limit",a.bot_is_down="bot_is_down",a.exception="exception",a.rate_limit_exceeded="rate_limit_exceeded",a.unsupported_file_type="unsupported_file_type",a.file_too_large="file_too_large",a.file_not_accessible="file_not_accessible",a.input_empty="input_empty",a.multiple_files_unsupported="multiple_files_unsupported",a.invalid_file_type_combination="invalid_file_type_combination",a.multiple_video_files="multiple_video_files",a.message_points_display_price_mismatch="message_points_display_price_mismatch",a.mentioned_bot_does_not_exist="mentioned_bot_does_not_exist",a.multiple_image_files_unsupported="multiple_image_files_unsupported",a.image_attachment_number_exceeeded="image_attachment_number_exceeeded",a.unprocessable_file="unprocessable_file",a.concurrent_messages="concurrent_messages",t.Z=n},73870:function(e){e.exports={fileInfo:"FileInfo_fileInfo__5ZvMO",loading:"FileInfo_loading__XwVJt",icon:"FileInfo_icon__HhOin",textPane:"FileInfo_textPane__d9VVB",title:"FileInfo_title__sUM2l",metadata:"FileInfo_metadata__Wu4uZ",fileType:"FileInfo_fileType__KZDVV",image:"FileInfo_image__M_cAh",imageLoader:"FileInfo_imageLoader__czDR_"}},81791:function(e){e.exports={container:"HorizontallyScrollable_container__biWGT"}},27813:function(e){e.exports={loadingSpinner:"LoadingSpinner_loadingSpinner__vCqHc",spin:"LoadingSpinner_spin__DgELP"}}}]);